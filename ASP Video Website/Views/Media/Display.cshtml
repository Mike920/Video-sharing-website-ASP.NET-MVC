
@{
    ViewBag.Title = "Display";
}

<h2>Movie</h2>

<center>
    <h1>Demo Page for videowebsite.apphb.com</h1>
    <div id="wrapper">
        <div id="player"></div>
    </div>
</center>



<script src="~/Scripts/bitdash.min.js"></script>
<script src="~/Scripts/detectmobilebrowser.js"></script>
<script src="http://jwpsrv.com/library/OF57rvwbEeSB7hJtO5t17w.js"></script>

<script type="text/javascript">
    var conf = {
        key: "a688fd4642b4ff1f7fc403315975d07b",
        source: {
            // mpd: "file/sintel.mpd",
            mpd: "@Url.Action("MediaSegment", "File", new {id = @ViewBag.MediaId, filename = "video.mpd"}, Request.Url.Scheme)",
            progressive: "@Url.Action("MediaFile", "File", new {id = @ViewBag.MediaId, filename = "mobile.mp4"}, Request.Url.Scheme)",
            poster: "@Url.Action("MediaFile", "File", new {id = @ViewBag.MediaId, filename = "thumbnail.jpg"}, Request.Url.Scheme)"
        },
        playback: {
            autoplay: true,
            muted: false
        },
        style: {
            width: '600px',
            height: '250px'
        },
        events: {
            onError: function(data) {
                console.error("bitdash error: " + data.code + ": " + data.message);
            },
            onReady: function(obj) {
                console.log(this.getVersion() + ' onReady: ', obj);
            }
        }
    };

    var player;
    if (!isMobileDevice())
        player = bitdash("player").setup(conf);
    else {
        @* var elem = document.getElementById('wrapper');
        elem.innerHTML = "<video width='640' height='360' autoplay>" +
            " <source src='@Url.Action("MediaFile", "File", new {id = @ViewBag.MediaId, filename = "mobile.mp4"}, Request.Url.Scheme)' type='video/mp4'>" +
            "Your browser does not support the video tag." +
            "</video>";
            *@
        jwplayer("player").setup({
            file: "@Url.Action("MediaFile", "File", new {id = @ViewBag.MediaId, filename = "mobile.mp4"}, Request.Url.Scheme)",
            image: "@Url.Action("MediaFile", "File", new {id = @ViewBag.MediaId, filename = "thumbnail.jpg"}, Request.Url.Scheme)",
            width: 640,
            height: 360
        });
    }
</script>
